/*!CK:1972460795!*//*1450527259,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["UHj3e"]); }

__d('FBPaymentsForm.react',['FBPaymentsErrorNotice.react','React','cloneWithProps','cx','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'FBPaymentsForm',propTypes:{errorTitle:m.string,onValidation:m.func.isRequired,prefilledFormData:m.object,saveErrors:m.object,showIcons:m.bool,showLabels:m.bool,showPlaceholderOnFocus:m.bool,showSecondaryIcons:m.bool,useGutters:m.bool},getDefaultProps:function(){return {prefilledFormData:{},saveErrors:null,showIcons:true,showLabels:false,showPlaceholderOnFocus:false,showSecondaryIcons:false,useGutters:false};},getInitialState:function(){var o=this.props.prefilledFormData,p=this.props.children,q={};i.Children.forEach(p,function(r,s){q[r.props.name]={valid:!r.props.required,value:o?o[r.props.name]:''};});return {fields:q,isValid:false};},_fieldKeyOrder:[],handleFormValueChange:function(o,p,q,r){var s=this.state.fields;s[o]={valid:q,value:p};this.validateForm();if(this.props.autoTab===true&&r&&q){var t=this._fieldKeyOrder.indexOf(o);if(t!==-1){var u=this._fieldKeyOrder[t+1];if(u){var v=this.refs[u];v&&v.refs.input.focusInput();}}}},validateForm:function(){var o=true,p=this.state.fields;o=!l(p).some(function(q){return !q.valid;});this.setState({isValid:o});this.props.onValidation(o,this.serializeFormFields());},serializeFormFields:function(){var o=this.state.fields,p={};for(var q in o)if(o.hasOwnProperty(q))p[q]=o[q].value;return p;},getSaveError:function(o){var p='',q=this.props.saveErrors;if(q&&q.fields&&q.fields[o]){p=q.fields[o].message;if(p.__html)p=p.__html;}return p;},renderGeneralError:function(){var o=this.getGeneralError();if(o)return (i.createElement(h,{error:o}));},getGeneralError:function(){if(this.props.saveErrors&&this.props.saveErrors.general)return this.props.saveErrors.general;return null;},renderFormFields:function(){var o=[],p=[],q=[],r=0,s=this.props.children,t=i.Children.count(s),u=[];i.Children.forEach(s,(function(v,w){var x=w===t-1;if(!v)return null;var y=parseInt(v.props.width||'100',10),z=v.props.name;v=j(v,{key:z,onChange:this.handleFormValueChange,saveError:this.getSaveError(z),showIcon:this.props.showIcons,showLabel:this.props.showLabels,showPlaceholderOnFocus:this.props.showPlaceholderOnFocus,showSecondaryIcon:this.props.showSecondaryIcons,useGutter:this.props.useGutters,value:this.state.fields[z].value,ref:z});u.push(z);if(!v.props.ignoreStyling){if(Math.round(r)<100)o.push(v);r+=y;if(Math.round(r)===100||x){p.push(i.createElement('div',{className:(this.props.useGutters?"_284-":'')+(' '+"_284_")+(o.length>1?' '+"_2850":'')+(p.length===0?' '+"_2851":'')+(x?' '+"_2852":''),key:p.length},o));o=[];r=0;}}else q.push(v);}).bind(this));this._fieldKeyOrder=u;return q.concat(p);},render:function(){return (i.createElement('form',{className:"_2853"},this.renderGeneralError(),this.renderFormFields()));}});f.exports=n;},null);