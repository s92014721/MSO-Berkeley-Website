/*!CK:3856362115!*//*1449710053,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["WRs\/D"]); }

__d('PagesMessengerThreadDialogLink.react',['AsyncDialog','AsyncRequest','Link.react','MessageThreadViewSource','PagesMessagingConst','ReactComponentWithPureRenderMixin','React','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=n.PropTypes,q=n.createClass({displayName:'PagesMessengerThreadDialogLink',mixins:[m],propTypes:{threadID:p.string.isRequired,viewer:p.string.isRequired,folder:p.string},getInitialState:function(){return {permalinkURI:'#'};},componentDidMount:function(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function(r){if(r.threadID!==this.props.threadID||r.folder!==this.props.folder)this._getPermalinkURI(r);},render:function(){return (n.createElement(j,{className:this.props.className,href:'#',onClick:this._handleClick,role:'button'},this.props.children));},_handleClick:function(r){r.preventDefault();h.send(new i(this.state.permalinkURI).setRelativeTo(r.target));},_getPermalinkURI:function(r){this.setState(this.getInitialState());var s=r.threadID,t=r.viewer,u=r.folder;e(['MercuryThreadIDMap'],(function(v){var w=v.getForFBID(t);w.getServerIDFromClientID(s,(function(x){this.isMounted()&&this.setState({permalinkURI:new o(l.LOAD_MESSAGE_THREAD_URI).setQueryData({pageid:t,threadid:s,threadElementID:x,folder:u,source:k.REFRESH_HIGHLANDER_JEWEL}).toString()});}).bind(this));}).bind(this));}});f.exports=q;},null);