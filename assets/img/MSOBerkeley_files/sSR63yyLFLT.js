/*!CK:2964997278!*//*1450298540,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["UE8Jk"]); }

__d('sortReactionTypes',['UFIConstants','UFIReactionTypes'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={};i.ordering.forEach(function(l,m){j[l]=m;});function k(l,m){return Object.keys(l).map(function(n){return Number(n);}).sort(function(n,o){if(m&&n===h.LikeReaction)return -1;if(l[n]['default']===l[o]['default'])return j[n]-j[o];return l[o]['default']-l[n]['default'];});}f.exports=k;},null);
__d('ReactionIconsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:ReactionIconsLoggerConfig',this.$ReactionIconsTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:ReactionIconsLoggerConfig',this.$ReactionIconsTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$ReactionIconsTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$ReactionIconsTypedLogger1=babelHelpers._extends({},this.$ReactionIconsTypedLogger1,m);return this;};k.prototype.setClassName=function(m){this.$ReactionIconsTypedLogger1.class_name=m;return this;};k.prototype.setNaturalHeight=function(m){this.$ReactionIconsTypedLogger1.natural_height=m;return this;};k.prototype.setNaturalWidth=function(m){this.$ReactionIconsTypedLogger1.natural_width=m;return this;};k.prototype.setNonIxImageData=function(m){this.$ReactionIconsTypedLogger1.non_ix_image_data=m;return this;};k.prototype.setReaction=function(m){this.$ReactionIconsTypedLogger1.reaction=m;return this;};k.prototype.setSize=function(m){this.$ReactionIconsTypedLogger1.size=m;return this;};k.prototype.setSpriteCssClass=function(m){this.$ReactionIconsTypedLogger1.sprite_css_class=m;return this;};k.prototype.setSpriteMapCssClass=function(m){this.$ReactionIconsTypedLogger1.sprite_map_css_class=m;return this;};k.prototype.setSprited=function(m){this.$ReactionIconsTypedLogger1.sprited=m;return this;};k.prototype.setSrc=function(m){this.$ReactionIconsTypedLogger1.src=m;return this;};k.prototype.setVC=function(m){this.$ReactionIconsTypedLogger1.vc=m;return this;};var l={class_name:true,natural_height:true,natural_width:true,non_ix_image_data:true,reaction:true,size:true,sprite_css_class:true,sprite_map_css_class:true,sprited:true,src:true,vc:true};f.exports=k;},null);
__d('UFIReactionIconImpl.react',['React','ReactDOM','Image.react','ReactionIconsTypedLogger','UFIConfig','UFIReactionIcons','UFIReactionTypes','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=h.PropTypes;q=babelHelpers.inherits(t,h.Component);r=q&&q.prototype;t.prototype.shouldComponentUpdate=function(u,v){'use strict';return (u.className!==this.props.className||u.reaction!==this.props.reaction||u.size!==this.props.size);};t.prototype.componentDidMount=function(){'use strict';var u=i.findDOMNode(this.refs.img),v=u.offsetHeight,w=u.offsetWidth;if(v===0||w===0){var x=u.src,y=this.props,z=y.className,aa=y.reaction,ba=y.size,ca=m[aa][ba],da=ca.spriteCssClass,ea=ca.spriteMapCssClass,fa=ca.sprited;if(fa)x=window.getComputedStyle(u,null).backgroundImage.slice(4,-1);new k().setClassName(z).setNaturalHeight(v).setNaturalWidth(w).setReaction(aa).setSize(ba).setSpriteCssClass(da).setSpriteMapCssClass(ea).setSprited(fa).setSrc(x).setNonIxImageData(l.nonIXImageData).log();}};t.prototype.render=function(){'use strict';if(l.nonIXImageData)return (h.createElement('i',{ref:'img',className:p(n.reactions[this.props.reaction].name,"_2p78"+(this.props.size==='13'?' '+"_2p79":'')+(this.props.size==='16'?' '+"_2p7a":''),this.props.className)}));return (h.createElement(j,{ref:'img',className:this.props.className,src:m[this.props.reaction][this.props.size]}));};function t(){'use strict';q.apply(this,arguments);}t.propTypes={className:s.string,reaction:s.number.isRequired,size:s.oneOf(['13','16'])};t.defaultProps={className:null,size:'16'};f.exports=t;},null);
__d('UFIReactionsProfileBrowserUtils',['ActorURI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getDialogURI:function(l,m){return h.create(j.getURIBuilder().setString('ft_ent_identifier',l.entidentifier).setEnum('reaction_type',m).getURI(),l.actorforpost);},getPageURI:function(l){return h.create(i.getURIBuilder().setString('ft_ent_identifier',l.entidentifier).getURI(),l.actorforpost);}};f.exports=k;},null);
__d('UFIReactionsBlingTokens.react',['BootloadedComponent.react','Event','JSResource','RTLKeys','React','ReactDOM','UFIConfig','UFIReactionIconImpl.react','UFIReactionTypes','UFIReactionsProfileBrowserUtils','cx','fbt','joinClasses','sortReactionTypes'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v,w,x=l.PropTypes;v=babelHelpers.inherits(y,l.Component);w=v&&v.prototype;function y(z,aa){'use strict';w.constructor.call(this);this.index=-1;this.onBlur=this.onBlur.bind(this);this.onKeyDown=this.onKeyDown.bind(this);this.onKeyUp=this.onKeyUp.bind(this);this.state={active:null,canFocus:false,selectedIndex:0,shouldRemoveOutline:true,useTooltip:false};}y.prototype.componentDidUpdate=function(){'use strict';var z=this.state,aa=z.canFocus,ba=z.selectedIndex;if(aa&&ba>-1)m.findDOMNode(this.refs[ba]).focus();};y.prototype.componentDidMount=function(){'use strict';this.focusInListener=i.listen(document.documentElement,'focusin',this.onBlur);};y.prototype.componentWillUnmount=function(){'use strict';this.focusInListener.remove();};y.prototype.componentWillUpdate=function(){'use strict';this.index=-1;};y.prototype.componentWillReceiveProps=function(z){'use strict';if(z.feedback.reactioncount!==this.props.feedback.reactioncount)this.setState({active:null});};y.prototype.onBlur=function(event){'use strict';var z=event.target instanceof Node&&this.refs.tokens.contains(event.target);if(!z)this.setState({canFocus:false});};y.prototype.onMouseEnter=function(z){'use strict';this.setState({active:z,useTooltip:true,shouldRemoveOutline:true});};y.prototype.onKeyDown=function(event){'use strict';switch(event.keyCode){case k.TAB:this.setState({selectedIndex:0});break;case k.LEFT:case k.RIGHT:event.preventDefault();var z=this.state.selectedIndex+(event.keyCode===k.LEFT?-1:1),aa=this.index;if(z>=0&&z<=aa)this.setState({canFocus:true,selectedIndex:z});break;}};y.prototype.onKeyUp=function(event){'use strict';if(event.keyCode===k.TAB)this.setState({shouldRemoveOutline:false});};y.prototype.onTokenClick=function(z){'use strict';this.setState({selectedIndex:z});};y.prototype.renderToken=function(z){'use strict';var aa=this.props.feedback,ba=s._("{reduced_count} {reaction_type}",[s.param('reduced_count',aa.reactioncountmap[z].reduced),s.param('reaction_type',p.reactions[z].display_name)]),ca=++this.index,da={ajaxify:q.getDialogURI(aa,z),'aria-label':ba,className:"_27jf"+(this.state.shouldRemoveOutline?' '+"_2f24":'')+(' '+"_3emk"),href:q.getPageURI(aa),key:'reactionType-'+z,onClick:this.onTokenClick.bind(this,ca),ref:ca,rel:'dialog',role:'button',tabIndex:this.state.selectedIndex===ca?0:-1},ea=l.createElement(o,{className:"_4-op",reaction:z}),fa=this.state.useTooltip,ga=!fa?this.onMouseEnter.bind(this,z):null,ha=l.createElement('a',babelHelpers._extends({onMouseEnter:ga},da),ea,l.createElement('span',{className:"_3chu"},aa.reactioncountmap[z].reduced));if(!fa)return ha;return (l.createElement(h,babelHelpers._extends({bootloadPlaceholder:ha,bootloadLoader:j('UFIReactionsTooltipImpl.react'),active:this.state.active===z,feedback:aa,reaction:z,onComponentLoad:this.props.onComponentLoad},da),ea,l.createElement('span',{className:"_3chu"},aa.reactioncountmap[z].reduced)));};y.prototype.render=function(){'use strict';var z=this.props.feedback.reactioncountmap,aa=u(z,this.props.hoistLike);if(this.props.max)aa=aa.slice(0,this.props.max);aa=aa.map((function(ba){if(!p.reactions[ba]||!z[ba]['default'])return null;return this.renderToken(ba);}).bind(this));return (l.createElement('div',{className:t("_3t53",this.props.className),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp},l.createElement('span',{'aria-label':s._("See who reacted to this"),className:"_3t54",ref:'tokens',role:'toolbar'},aa),this.props.children));};y.propTypes={className:x.string,hoistLike:x.bool,max:x.number};y.defaultProps={className:null,hoistLike:false};f.exports=y;},null);
__d('UFIReactionsLinkImpl.react',['Arbiter','BanzaiLogger','BootloadedComponent.react','Event','JSResource','RTLKeys','React','ReactDOM','Image.react','ReactionsWaterfallTypedLogger','SubscriptionsHandler','UFIConstants','UFILikeWebDriverIDs','UFIReactionIconImpl.react','UFIReactionTypes','UFIUserActions','UFIUIEvents','cx','shallowCompare'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa,ba,ca=n.PropTypes,da=false,ea=null,fa=n.createElement('div',null),ga=v.reactions,ha=Object.keys(ga),ia=10,ja=500,ka=250,la=5,ma=500,na=('ontouchstart' in window);aa=babelHelpers.inherits(oa,n.Component);ba=aa&&aa.prototype;function oa(pa,qa){'use strict';ba.constructor.call(this,pa,qa);this.hideDialog=this.hideDialog.bind(this);this.onBlur=this.onBlur.bind(this);this.onClick=this.onClick.bind(this);this.onClickCapture=this.onClickCapture.bind(this);this.onDragStart=this.onDragStart.bind(this);this.onKeyUp=this.onKeyUp.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.onMouseEnter=this.onMouseEnter.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);this.onMouseUp=this.onMouseUp.bind(this);this.onReactionChange=this.onReactionChange.bind(this);this.onReactionMouseEnter=this.onReactionMouseEnter.bind(this);this.onReactionMouseLeave=this.onReactionMouseLeave.bind(this);this.onReactionKeyUp=this.onReactionKeyUp.bind(this);this.onReactionTriggerKeyDown=this.onReactionTriggerKeyDown.bind(this);this.showDialog=this.showDialog.bind(this);this.dragStartX=null;this.dragStartY=null;this.subscriptionsHandler=new r();if(na){this.onTouchEnd=this.onTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.onTouchStart=this.onTouchStart.bind(this);}this.state={dialogShown:false,isLongPressing:false,isMouseDown:false,isMouseOver:false,isScrubbing:false,NUXShown:false};}oa.prototype.shouldComponentUpdate=function(pa,qa){'use strict';return z(this,pa,qa);};oa.prototype.componentWillUpdate=function(pa,qa){'use strict';if(this.state.dialogShown&&!qa.dialogShown)this.$UFIReactionsLink1(this.props.reaction);};oa.prototype.componentDidUpdate=function(pa,qa){'use strict';if(!qa.dialogShown&&this.state.dialogShown){this.subscriptionsHandler.addSubscriptions(k.listen(document.documentElement,'click',this.onBlur),k.listen(document.documentElement,'focusin',this.onBlur));if(na){var ra;this.subscriptionsHandler.addSubscriptions(k.listen(document.documentElement,'touchstart',function(event){ra=event.touches[0];}),k.listen(document.documentElement,'touchmove',function(event){ra=event.touches[0];}),k.listen(document.documentElement,'touchend',(function(event){if(!this.refs.root.contains(document.elementFromPoint(ra.clientX,ra.clientY)))this.setState({dialogShown:false,isLongPressing:false,isMouseDown:false,isScrubbing:false});}).bind(this)));}}else if(qa.dialogShown&&!this.state.dialogShown){this.subscriptionsHandler.release();this.subscriptionsHandler=new r();}};oa.prototype.componentDidMount=function(){'use strict';this.$UFIReactionsLink2();};oa.prototype.componentWillUnmount=function(){'use strict';this.subscriptionsHandler.release();};oa.prototype.maybeShowNUX=function(){'use strict';if(this.props.hasNUX&&!da){da=true;this.setState({NUXShown:true,dialogShown:false});i.log('WebReactionsNuxLoggerConfig',{feedback_id:this.props.id,'interface':'www'});}};oa.prototype.hideDialog=function(){'use strict';this.setState({dialogShown:false,isScrubbing:false});};oa.prototype.showDialog=function(){'use strict';if(this.dialogShownTime===0)this.dialogShownTime=Date.now();da=true;this.setState({dialogShown:true,NUXShown:false});};oa.prototype.onBlur=function(event){'use strict';var pa=event.target instanceof Node&&o.findDOMNode(this.refs.root).contains(event.target);if(!pa)this.setState({dialogShown:pa});};oa.prototype.onClick=function(event){'use strict';var pa=this.props.reaction;if(!pa||pa===s.LikeReaction||!ga[pa]){this.maybeShowNUX();this.props.onActionLikeClick(event);}else this.onReactionChange(0,event);this.setState({dialogShown:false,isMouseOver:false,isScrubbing:false});};oa.prototype.onClickCapture=function(event){'use strict';event.stopPropagation();this.setState({isLongPressing:false});};oa.prototype.onDragStart=function(event){'use strict';event.preventDefault();};oa.prototype.onKeyUp=function(event){'use strict';if(event.keyCode==m.TAB)this.setState({dialogShown:true});};oa.prototype.onMouseDown=function(event){'use strict';clearTimeout(this.hoverTimeout);this.mouseDownTime=event.timeStamp;this.setState({isMouseDown:true});};oa.prototype.onMouseEnter=function(event){'use strict';clearTimeout(this.hoverTimeout);this.setState({isMouseOver:true});this.initialReaction=this.props.reaction;this.mouseEnterTime=event.timeStamp;this.mouseDownTime=0;this.mouseUpTime=0;};oa.prototype.onMouseLeave=function(event){'use strict';clearTimeout(this.hoverTimeout);this.hoverTimeout=setTimeout(this.hideDialog,ka);this.setState({isMouseOver:false});var pa=this.mouseUpTime>0&&this.mouseDownTime>0?this.mouseUpTime-this.mouseDownTime:0;if(this.refs.trigger.contains(event.target))new q().setClickDuration(pa).setFinalState(this.props.reaction).setHoverDuration(event.timeStamp-this.mouseEnterTime).setInitialState(this.initialReaction).setHasReactions(true).log();};oa.prototype.onMouseMove=function(event){'use strict';var pa=event.clientX,qa=event.clientY;clearTimeout(this.hoverTimeout);if(typeof this.hoverX==='number'&&typeof this.hoverY==='number'&&this.hoverX<pa+la&&this.hoverX>pa-la&&this.hoverY<qa+la&&this.hoverY>qa-la)this.hoverTimeout=setTimeout(this.showDialog,ja);this.hoverX=pa;this.hoverY=qa;};oa.prototype.onMouseUp=function(event){'use strict';this.mouseUpTime=event.timeStamp;this.setState({isMouseDown:false});};oa.prototype.onTouchStart=function(event){'use strict';if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout((function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true});}).bind(this),ma);}};oa.prototype.onTouchEnd=function(event){'use strict';if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);};oa.prototype.onTouchMove=function(event){'use strict';if(this.state.isScrubbing)return;var pa=event.touches[0],qa=pa.clientX,ra=pa.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=qa;this.dragStartY=ra;return;}if(typeof this.dragStartX==='number'&&typeof this.dragStartY==='number'&&(this.dragStartX<qa+ia||this.dragStartX>qa-ia||this.dragStartY<ra+ia||this.dragStartY>ra-ia))this.setState({isScrubbing:true});};oa.prototype.onReactionChange=function(pa,event){'use strict';this.$UFIReactionsLink1(pa);w.changeReaction(this.props.id,pa,{target:event.target});h.inform(x.ReactionButtonClicked,{ft_id:this.props.id,like_action:pa>0,target:event.target});this.setState({dialogShown:false,isLongPressing:false,isMouseDown:false,isScrubbing:false});};oa.prototype.onReactionKeyUp=function(event){'use strict';if(event.keyCode==m.ESC||event.keyCode==m.RETURN)this.hideDialog();};oa.prototype.onReactionMouseEnter=function(pa,event){'use strict';if(this.reactionsHoverStartTimeMap[pa]===0)this.reactionsHoverStartTimeMap[pa]=Date.now();};oa.prototype.onReactionMouseLeave=function(pa,event){'use strict';if(this.reactionsHoverStartTimeMap[pa]){this.reactionsHoverTotalTimeMap[pa]+=Date.now()-this.reactionsHoverStartTimeMap[pa];this.reactionsHoverStartTimeMap[pa]=0;}};oa.prototype.onReactionTriggerKeyDown=function(event){'use strict';switch(event.keyCode){case m.ESC:this.hideDialog();break;}};oa.prototype.renderTrigger=function(){'use strict';var pa=this.props.reaction;if(pa&&!ga[pa])pa=null;var qa;if(!pa||pa==s.LikeReaction){qa=ga[s.LikeReaction].display_name;}else qa=ga[pa].display_name;var ra=!pa||pa==s.LikeReaction?null:n.createElement(u,{className:"_1ktw",reaction:pa,size:'13'}),sa=pa?t.UNLIKE_LINK:t.LIKE_LINK;return (n.createElement('a',{className:"UFILikeLink"+(!ra?' '+"_48-k":'')+(pa?' '+"UFILinkBright":''),'data-testid':sa,href:'#',onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:function(event){event.preventDefault();},onDragStart:this.onDragStart,onKeyDown:this.onReactionTriggerKeyDown,onKeyUp:this.onKeyUp,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.state.isMouseOver?this.onMouseMove:null,onMouseUp:this.onMouseUp,onTouchEnd:na?this.onTouchEnd:null,onTouchMove:na?this.onTouchMove:null,onTouchStart:na?this.onTouchStart:null,ref:'trigger',role:'button',style:{color:pa?ga[pa].color:null},tabIndex:'-1'},ra,qa));};oa.prototype.renderMenu=function(){'use strict';if(!this.state.dialogShown&&!ea)return null;return (n.createElement(j,{bootloadPlaceholder:fa,bootloadLoader:l('UFIReactionsMenuImpl.react'),initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,mouseActivated:this.state.isMouseOver,onComponentLoad:function(pa){ea=pa;},onMouseEnter:(function(){clearTimeout(this.hoverTimeout);}).bind(this),onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onReactionFocus:this.showDialog,onReactionKeyUp:this.onReactionKeyUp,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions}));};oa.prototype.renderNUX=function(){'use strict';var pa=o.findDOMNode(this.refs.root);if(!this.state.NUXShown||!pa)return null;return (n.createElement(j,{bootloadPlaceholder:n.createElement('div',null),bootloadLoader:l('UFIReactionsNUX.react'),context:pa}));};oa.prototype.render=function(){'use strict';return (n.createElement('div',{className:"uiContextualLayerParent"+(' '+"_khz")+(this.state.isScrubbing?' '+"_4bdq":''),ref:'root'},this.renderTrigger(),this.renderMenu(),this.renderNUX()));};oa.prototype.$UFIReactionsLink2=function(){'use strict';this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};ha.forEach((function(pa){this.reactionsHoverStartTimeMap[pa]=0;this.reactionsHoverTotalTimeMap[pa]=0;}).bind(this));};oa.prototype.$UFIReactionsLink1=function(pa){'use strict';if(this.dialogShownTime!==0){var qa=babelHelpers._extends({feedback_id:this.props.id,final_reaction:pa,initial_reaction:this.props.reaction,'interface':'www',long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,time_spent:Date.now()-this.dialogShownTime},{});for(var ra in this.reactionsHoverTotalTimeMap){var sa='time_spent_'+ga[ra].name.toLowerCase();qa[sa]=this.reactionsHoverTotalTimeMap[ra];}i.log('UserReactionsLoggerConfig',qa);this.$UFIReactionsLink2();}};oa.propTypes={hasNUX:ca.bool.isRequired,id:ca.string.isRequired,onActionLikeClick:ca.func.isRequired,reaction:ca.number.isRequired,supportedReactions:ca.arrayOf(ca.number).isRequired};f.exports=oa;},null);