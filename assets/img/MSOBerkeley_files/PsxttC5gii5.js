/*!CK:3447382873!*//*1450368894,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["lnm3R"]); }

__d('Token.react',['CloseButton.react','React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'Token',propTypes:{name:m.string,label:m.string.isRequired,value:m.string,removable:m.bool,onRemove:m.func},render:function(){var o=null;if(this.props.name)o=[i.createElement('input',{type:'hidden',name:this.props.name+'[]',value:this.props.value}),i.createElement('input',{type:'hidden',name:'text_'+this.props.name+'[]',value:this.props.label})];var p=null;if(this.props.removable)p=i.createElement(h,{'aria-label':k._("Remove {item}",[k.param('item',this.props.label)]),className:'remove',size:'small',onClick:this.props.onRemove});var q="uiToken"+(this.props.removable?' '+"removable":'');return (i.createElement('span',babelHelpers._extends({},this.props,{className:l(this.props.className,q)}),this.props.label,o,p));}});f.exports=n;},null);
__d("XGroupSellNUXMarkAsSeenController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/groups\/sell\/_nuxMarkAsSeen\/",{assoc_type:{type:"Int"},remove_node_id:{type:"String"},nux_type:{type:"Enum",enumType:1},group_id:{type:"Int"}});},null);
__d('GroupSellNUX',['Arbiter','AsyncRequest','DOM','Event','OnVisible','SubscriptionsHandler','XGroupSellNUXMarkAsSeenController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o={};function p(s,t){var u=n.getURIBuilder();if(s){u.setInt('assoc_type',s);}else if(t)u.setEnum('nux_type',t);var v=u.getURI();new i(v).send();}function q(s,t,u,v){if(o[v])return;new l(t.getContext(),function(){if(o[v])return;o[v]=true;t.show();p(v);},true);s.addSubscriptions(h.subscribe('page_transition',function(){s.release();if(t.isShown())t.hide();}));}var r={markAsSeen:function(s){p(null,s);},setupDialogMarkAsSeen:function(s,t){s.subscribe('click',function(){p(null,t);});},setupTooltipMarkAsSeen:function(s,t){var u=new m();new l(s.getContext(),function(){p(null,t);s.show();},false);u.addSubscriptions(h.subscribe('page_transition',function(){if(s.isShown())s.hide();u.release();u=null;}));},manageComposerTooltip:function(s,t,u,v){var w=new m();w.addSubscriptions(k.listen(s,'click',function(){if(t.isShown())t.hide();}),h.subscribe('GroupSellComposer/launchedComposer',function(){if(t.isShown())t.hide();}));q(w,t,u,v);},manageTooltip:function(s,t,u){var v=new m();q(v,s,t,u);},setupOnClickMarkAsSeenAndRemove:function(s,t,u,v){var w=new m();w.addSubscriptions(k.listen(s,'click',function(){p(u,v);if(t!==null)t.hide();w.release();w=null;}),h.subscribe('page_transition',function(){w.release();w=null;}));},setupOnClickMarkAsSeen:function(s,t,u,v){var w=new m();w.addSubscriptions(k.listen(s,'click',function(){p(u,v);if(typeof t==='object'){j.remove(t);}else if(t!==null)t.hide();}),h.subscribe('page_transition',function(){w.release();w=null;}));}};f.exports=r;},null);
__d('P2PConfirmationDialog.react',['CurrentEnvironment','LayerFadeOnHide','LeftRight.react','P2PButton.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PText.react','P2PDialogTitle.react','React','cx','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=q.PropTypes,v=q.createClass({displayName:'P2PConfirmationDialog',propTypes:{allowBack:u.bool,buttonLabel:u.node.isRequired,buttonUse:u.string.isRequired,centered:u.bool,image:u.object.isRequired,onBackClick:u.func,onOKClick:u.func,onSecondaryClick:u.func,showCloseButton:u.bool,showSecondaryButton:u.bool,secondaryButtonLabel:u.node,secondaryButtonUse:u.string,title:u.string.isRequired},getDefaultProps:function(){return {buttonLabel:t._("OK"),buttonUse:'default',centered:false,onBackClick:s,onSecondaryClick:s,showCloseButton:false,showSecondaryButton:false,onOKClick:s,width:h.messengerdotcom?350:300};},getBackButton:function(){if(!this.props.allowBack)return null;return (q.createElement(k,{label:t._("Back"),onClick:this.props.onBackClick,use:'default'}));},getSecondaryButton:function(){if(!this.props.showSecondaryButton)return null;return (q.createElement(k,{label:this.props.secondaryButtonLabel,onClick:this.props.onSecondaryClick,use:this.props.secondaryButtonUse}));},render:function(){var w=h.messengerdotcom,x=[q.createElement('div',{className:"_465t",key:'confirmation_icon'},this.props.image),q.createElement(o,{className:"_465u"+(this.props.centered?' '+"_465v":''),key:'confirmation_text',type:'primary'},this.props.children)];if(w)x=q.createElement(j,{direction:'left'},x);return (q.createElement(l,{behaviors:babelHelpers._extends({LayerFadeOnShow:false,LayerFadeOnHide:i},this.props.behaviors),className:"_465w"+(w?' '+"_465x":''),layerHideOnBlur:false,ref:'dialog',repositionOnUpdate:true,shown:true,width:this.props.width},q.createElement('div',{className:"_465y"},q.createElement(p,{className:"_465z",showCloseButton:this.props.showCloseButton},this.props.title),q.createElement(m,null,x),q.createElement(n,null,this.getBackButton(),this.getSecondaryButton(),q.createElement(k,{label:this.props.buttonLabel,onClick:this.props.onOKClick,use:this.props.buttonUse})))));}});f.exports=v;},null);
__d('P2PErrorDialog.react',['CurrentEnvironment','Image.react','P2PConfirmationDialog.react','P2PText.react','React','emptyFunction','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=l.PropTypes,q=l.createClass({displayName:'P2PErrorDialog',propTypes:{allowBack:p.bool,onBackClick:p.func,onOKClick:p.func,error:p.object,title:p.string},getDefaultProps:function(){return {allowBack:false,onBackClick:m,onOKClick:m,error:null,title:n._("Problem")};},renderErrorContent:function(){var r=this.props.error;if(r.message.__html){return (l.createElement(k,{dangerouslySetInnerHTML:r.message,type:'primary'}));}else return l.createElement(k,{type:'primary'},r.message);},getImage:function(){if(h.messengerdotcom){return (l.createElement(i,{height:62,width:62,src:o('/images/p2p/confirmation-error-messengerdotcom.png')}));}else return (l.createElement(i,{height:55,width:55,src:o('/images/p2p/confirmation-error.png')}));},render:function(){var r=this.getImage();return (l.createElement(j,{allowBack:this.props.allowBack,behaviors:babelHelpers._extends({},this.props.behaviors),centered:this.props.centered,image:r,onBackClick:this.props.onBackClick,onOKClick:this.props.onOKClick,title:this.props.title,width:this.props.width},this.renderErrorContent()));}});f.exports=q;},null);
__d("XShareDialogSubmitController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/share\/dialog\/submit\/",{post_id:{type:"Int"},share_type:{type:"Int"},url:{type:"String"},audience_type:{type:"String"},owner_id:{type:"Int"},app_id:{type:"Int"},message:{type:"String"},shared_ad_id:{type:"Int"},sharer_id:{type:"Int"},source:{type:"String"},audience_targets:{type:"IntVector"},ephemeral_ttl_mode:{type:"Int"},tagged_people:{type:"IntVector"},tagged_place:{type:"Int"},tagged_action:{type:"Int"},tagged_object:{type:"Int"},tagged_object_str:{type:"String"},tagged_action_icon:{type:"Int"},attribution:{type:"Int"},privacy:{type:"String"},messaging_tags:{type:"StringVector"},internalextra:{type:"StringToStringMap"},internal_preview_image_id:{type:"Int"},share_now:{type:"Bool",defaultValue:false},is_forced_reshare_of_post:{type:"Bool",defaultValue:false},targeted_privacy_data:{type:"HackType"}});},null);
__d("XGroupSellPostInterestController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/groups\/sell\/interest\/",{});},null);
__d('GroupSellInterestDialog.react',['AsyncRequest','BackgroundImage.react','ContextualLayerUpdateOnScroll','GroupSellNUX','Image.react','LayerHideOnBlur','LayerHideOnTransition','LineClamp.react','Link.react','P2PAmountUtils','P2PErrorDialog.react','P2PLoadingMask.react','React','ReactLayeredComponentMixin','ShareDialogAudienceTypes','XShareDialogSubmitController','XGroupSellPostInterestController','XUIAmbientNUX.react','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUIGrayText.react','Token.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){if(c.__markCompiled)c.__markCompiled();var ja=t.PropTypes,ka=false,la={regular:'regular',expanded:'expanded'},ma=t.createClass({displayName:'GroupSellInterestDialog',mixins:[u],propTypes:{action:ja.object.isRequired,item:ja.object.isRequired,shareData:ja.object.isRequired,postURI:ja.string.isRequired,postID:ja.string.isRequired,showNux:ja.bool,seller:ja.object.isRequired,surface:ja.string.isRequired,style:ja.string.isRequired},getInitialState:function(){var na=false;if(this.props.showNux&&!ka&&!q.isAmountOverLegalLimit(this.props.item.price)){ka=true;na=true;}return {chatFieldContent:this.getDefaultContent(),error:null,loading:false,nuxShown:na,showDialog:false};},getDefaultContent:function(){return ia._("Hello I'm interested in purchasing your \"{name of item being sold}\"",[ia.param('name of item being sold',this.props.item.name)]).toString();},handleMessageSellerClicked:function(na){na.preventDefault();this.markInterest(this.props.action.contactButtonClicked);this.setState({showDialog:true});if(this.state.nuxShown){k.markAsSeen('p2p_chat_to_buy');this.setState({nuxShown:false});}},handleErrorOKClick:function(){this.setState({error:null});},handleToggle:function(na){if(!na)this.setState({chatFieldContent:this.getDefaultContent(),showDialog:false});},handleSendMessageClicked:function(){this.setState({loading:true});var na=w.getURIBuilder().setInt('post_id',this.props.postID).setInt('owner_id',this.props.shareData.ownerID).setInt('share_type',this.props.shareData.shareType).setIntVector('audience_targets',[this.props.seller.id]).setStringVector('messaging_tags',this.props.shareData.messagingTags).setString('message',this.state.chatFieldContent).setString('audience_type',v.MESSAGE).getURI();new h().setURI(na).setMethod('POST').setHandler((function(oa){this.setState({loading:false,showDialog:false});}).bind(this)).setErrorHandler((function(oa){this.setState({error:{message:ia._("Sorry, something went wrong. Please try again later.")},loading:false});}).bind(this)).send();},markInterest:function(na){var oa=x.getURIBuilder().getURI();new h().setURI(oa).setMethod('POST').setData({post_id:this.props.postID,action:na,surface:this.props.surface}).send();},handleChatFieldContentChanged:function(event){this.setState({chatFieldContent:event.target.value});},renderChatArea:function(){return (t.createElement('div',{className:"_5wh_"},t.createElement('textarea',{onChange:this.handleChatFieldContentChanged,placeholder:ia._("Write a message..."),value:this.state.chatFieldContent})));},renderSendToSellerField:function(){return (t.createElement('div',{className:"_5wi1"},ia._("To:"),' ',t.createElement(ga,{className:"_5wi2",label:this.props.seller.name})));},renderItemImage:function(){if(!this.props.item.image)return null;return (t.createElement(p,{className:"_5wi3",href:this.props.postURI},t.createElement(i,{backgroundPosition:'50% 50%',backgroundSize:'cover',height:90,src:this.props.item.image,width:90})));},renderItemInfo:function(){return (t.createElement('div',{className:"_5wi4"},this.renderItemImage(),t.createElement('div',{className:"_5wi5"},t.createElement('div',{className:"_5wio"},this.props.item.name),t.createElement('div',{className:"_5wip"},this.props.item.price),t.createElement(o,{lines:3},this.props.item.description))));},renderStartChatDialog:function(){return (t.createElement(aa,{onToggle:this.handleToggle,shown:true,width:500},t.createElement(ea,null,ia._("New Message")),t.createElement(ba,{className:"_5wiu"},this.renderSendToSellerField(),this.renderChatArea(),this.renderItemInfo()),t.createElement(da,{leftContent:t.createElement(fa,{shade:'light',size:'small'},ia._("Review your purchase carefully before paying."))},t.createElement(ca,{label:ia._("Send"),onClick:this.handleSendMessageClicked,size:'large',use:'confirm'})),t.createElement(s,{visible:this.state.loading})));},onNUXCloseButtonClick:function(){k.markAsSeen('p2p_chat_to_buy');this.setState({nuxShown:false});},renderLayers:function(){var na={};if(this.state.showDialog)na.startChatDialog=this.renderStartChatDialog();if(this.state.error)na.errorDialog=t.createElement(r,{title:ia._("Problem sending message"),onOKClick:this.handleErrorOKClick,error:this.state.error});if(this.state.nuxShown)na.ambientNux=t.createElement(y,{behaviors:{LayerHideOnTransition:n,LayerHideOnBlur:m,ContextualLayerUpdateOnScroll:j},contextRef:(function(){return this.refs.chat_to_buy;}).bind(this),shown:this.state.nuxShown,position:'below',alignment:'right',onCloseButtonClick:this.onNUXCloseButtonClick},ia._("Now you can securely pay for items right from your messages."));return na;},render:function(){var na=this.props.style===la.regular?t.createElement(z,{ref:'chat_to_buy',image:t.createElement(l,{className:"_49he",src:'/images/groups/sell/chat-to-buy.png'}),label:ia._("Message Seller"),onClick:this.handleMessageSellerClicked,size:'medium'}):t.createElement(z,{className:"_4xrw",ref:'chat_to_buy',use:'confirm',image:t.createElement(l,{className:"_44h-",src:'/images/groups/sell/message_seller_icon.png'}),label:t.createElement('span',{className:"_4xrx"},ia._("Message Seller")),onClick:this.handleMessageSellerClicked});return na;}});f.exports=ma;},null);