/*!CK:3703993242!*//*1449710654,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["2\/maQ"]); }

__d('Live',['Arbiter','AsyncDOM','AsyncSignal','ChannelConstants','DataStore','DOM','ServerJS','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(r,s){s=JSON.parse(JSON.stringify(s));new n().setRelativeTo(r).handle(s);}var q={logAll:false,startup:function(r){q.logAll=r;q.startup=o;h.subscribe(k.getArbiterType('live'),q.handleMessage.bind(q));},lookupLiveNode:function(r,s){var t=m.scry(document.body,'.live_'+r+'_'+s);t.forEach(function(u){if(l.get(u,'seqnum')===undefined){var v=JSON.parse(u.getAttribute('data-live'));l.set(u,'seqnum',v.seq);}});return t;},handleMessage:function(r,s){var t=s.obj,u=t.fbid,v=t.assoc,w=this.lookupLiveNode(u,v);if(!w)return false;w.forEach(function(x){i.invoke(t.updates,x);if(t.js)p(x,t.js);});},log:function(){if(q.logAll){var r=Array.from(arguments).join(':');new j('/common/scribe_endpoint.php',{c:'live_sequence',m:r}).send();}}};f.exports=q;},null);